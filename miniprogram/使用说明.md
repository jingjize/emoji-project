# 微信小程序使用说明

## 快速开始

### 1. 配置 AppID

编辑 `project.config.json`：
```json
{
  "appid": "你的小程序 AppID"
}
```

如果没有 AppID，可以使用测试号。

### 2. 配置后端地址

编辑 `app.js`，修改 API 地址：

```javascript
globalData: {
  // 本地开发（需要关闭域名校验）
  apiBaseUrl: 'http://localhost:8080/api/meme'
  
  // 或者使用服务器地址
  // apiBaseUrl: 'https://your-domain.com/api/meme',
}
```

### 3. 导入项目

1. 打开微信开发者工具
2. 选择「导入项目」
3. 选择 `miniprogram` 目录
4. 输入 AppID

### 4. 本地开发设置

在微信开发者工具中：
- 设置 → 项目设置 → 本地设置
- ✅ 勾选「不校验合法域名、web-view、TLS 版本以及 HTTPS 证书」

### 5. 启动后端服务

```bash
cd ..  # 回到项目根目录
mvn spring-boot:run
```

### 6. 运行小程序

在微信开发者工具中点击「编译」即可运行。

## 功能使用

1. **选择图片**：点击上传区域，选择相册或拍照
2. **选择情绪**：点击情绪按钮选择（默认：高兴）
   - 支持 9 种情绪：高兴、伤心、生气、惊讶、困惑、兴奋、平静、害羞、调皮
3. **输入自定义文字**（可选）：在文字输入框中输入你想添加到图片上的文字
   - 留空则不添加文字，只生成情绪表情图片
   - 输入文字后，文字会显示在生成的图片中间（背景透明，自动换行）
   - 建议不超过 50 个字符
4. **设置文字样式**（可选）：点击「文字样式设置」展开面板
   - **文字位置**：选择顶部、中间或底部
   - **字体大小**：滑动调节（20-100px）
   - **文字颜色**：点击颜色预览框，输入 RGB 值（如：255,255,255）
   - **描边颜色**：点击颜色预览框，输入 RGB 值（如：0,0,0）
   - **描边宽度**：滑动调节（1-10px）
5. **选择滤镜**（可选）：点击「滤镜效果」展开面板
   - 支持 10 种滤镜：无滤镜、黑白、复古、明亮、暗调、暖色、冷色、怀旧、高对比、高饱和
   - 点击滤镜按钮即可选择
6. **生成表情**：点击「生成情绪表情」按钮
7. **查看结果**：生成完成后显示图片
8. **保存图片**：点击「保存到相册」
9. **重新生成**：点击「重新生成」重置

## 功能说明

### 自定义文字功能
- **可选功能**：可以选择是否在生成的图片上添加自定义文字
- **文字样式自定义**：
  - **位置**：顶部、中间、底部（可自定义）
  - **颜色**：自定义文字颜色（RGB格式，如：255,255,255）
  - **描边**：自定义描边颜色和宽度（RGB格式，如：0,0,0）
  - **字体大小**：20-100px 可调（滑动条调节）
  - **字体**：黑体
  - **背景透明**：文字直接叠加在原图上，完美融入图片
  - **自动换行**：文字过长时自动换行
- **使用建议**：
  - 可以添加表情包文案，如"今天真开心！"
  - 可以添加说明文字，如"2024新年快乐"
  - 留空则不添加文字，只生成纯情绪表情图片
  - 文字会显示在图片中间（默认），不会遮挡重要内容
  - 颜色输入格式：RGB值，用逗号分隔，如"255,255,255"表示白色

### 滤镜特效功能
- **10 种滤镜效果**：
  - **无滤镜**：保持原图
  - **黑白**：经典黑白效果
  - **复古**：怀旧复古风格
  - **明亮**：增强亮度
  - **暗调**：降低亮度
  - **暖色**：暖色调滤镜
  - **冷色**：冷色调滤镜
  - **怀旧**：棕褐色怀旧效果
  - **高对比**：增强对比度
  - **高饱和**：增强饱和度
- **使用方式**：在生成前选择滤镜，滤镜会应用到 AI 生成的图片上
- **布局优化**：滤镜按钮采用网格布局，适配小程序屏幕

## 注意事项

- 小程序要求 HTTPS（生产环境）
- 需要在微信公众平台配置服务器域名
- 本地开发可以关闭域名校验
- 保存图片需要用户授权
- 自定义文字建议不超过 50 个字符
- 颜色输入格式：RGB值，用逗号分隔，如"255,255,255"表示白色，"0,0,0"表示黑色
- 样式和滤镜面板可以折叠，节省屏幕空间
- 所有样式设置都是可选的，使用默认值也能生成精美的表情包

docker构建
docker-compose -f docker-compose.simple.yml up -d --build